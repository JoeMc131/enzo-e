This directory contains various scripts and parameter files required to run the
merge stars test problem.

ics.py generates a text file (called particles.dat by default)
with particle data which can be used to initialise
the merge stars test problem in Enzo-E. More specifically, it creates star
particles with constant masses, with random positions uniformly distributed
in a sphere, and initial velocities all of the same magnitude with directions
directed towards the centre of the sphere, plus an additional (optional)
constant drift velocity. For more details run "python ics.py -h".

images.py takes as input the directories generated when Enzo-E runs the test
problem, which contain snapshots of the particle data at regular time intervals.
The script uses yt to read the data and then uses matplotlib to make scatter
plots of the x and y coordinates of the particles, outputting a series of
image files, with each image corresponding to a particular snapshot. These
images are useful to check whether the initial conditions were set up
correctly and if Enzo-E ran as expected. This script is designed to be run
with MPI as "mpirun -np X python images.py", with X the number of processes.
For further details run "python images.py -h".

mass_momentum_conservation.py takes as input the directories
generated when Enzo-E runs the test problem, which contain snapshots of the
particle data at regular time intervals. The script uses yt to read the
data and calculates the total mass, total x/y/z-momentum and total number
of particles in each snapshot. It then uses matplotlib to generate a figure
with three panels, showing the mass error, momentum error, and number of
particles plotted against the number of cycles (i.e. timesteps). The mass
/ momentum error at a given cycle is defined as the difference between the total
mass / momentum at a given cycle and the initial total mass / momentum,
divided by the initial total mass / momentum. This figure is useful for
checking if particles are indeed merging (shown by decrease in particle number
with time) and whether mass and momentum are being properly conserved.
This script is designed to be run
with MPI as "mpirun -np X python mass_momentum_conservation.py", with X
the number of processes.
For further details run "python mass_momentum_conservation.py -h".

The ".in" files are Enzo-E parameter files. They are identical except for
the parameter which determines the names of the directories which Enzo-E
generates to store snapshots.

Executing run.sh does the following:

- If particles.dat does not already exist in the directory, ics.py is run
 which generates particles.dat.

- Runs Enzo-E with 1, 8, and 16 processes, taking merge_stars_test-1.in,
  merge_stars_test-8.in, merge_stars_test-16.in as the input parameter file
  respectively

- Runs images.py, storing the output images for the 1/8/16 process runs in
  directories run-1/run-8/run-16 respectively.

- Runs mass_momentum_conservation, producing an image file called mmc-1.png /
  mmc-8.png / mmc-16.png for the 1/8/16 process runs respectively, storing
  it in run-1/run-8/run-16 as appropriate.

- Finally, all the snapshot directories are deleted.

NOTE: In order to execute run.sh the user must set the environment variables
ENZO_E_HOME and CHARM_HOME to paths where bin/enzo-e and bin/charmrun
can be found, respectively.